---
const items = [
  {
    title: "Kan man have et almindeligt liv med CP?",
    content:
      "Ja— mange med cerebral parese lever et aktivt og selvstændigt liv. Med de rette hjælpemidler, støtteordninger og forståelse fra omgivelserne kan man tage en uddannelse, arbejde, dyrke fritidsinteresser og have sociale relationer som alle andre.",
  },
  {
    title: "Hvilken støtte kan man få i hverdagen?",
    content:
      "Man kan få hjælpemidler, personlig assistance, bostøtte, transporthjælp og støtte i skole eller på arbejdspladsen. Støtten afhænger af den enkeltes behov og bliver som regel bevilget gennem kommunen.",
  },
  {
    title: "Hvordan søger man om hjælp eller støtte?",
    content:
      "Du kontakter din kommune og taler med en sagsbehandler. CP Danmark tilbyder også rådgivning og kan hjælpe dig med at forstå dine rettigheder og muligheder.",
  },
  {
    title: "Hvordan påvirker CP det sociale liv?",
    content:
      "Det er forskelligt fra person til person. Nogle oplever barrierer, mens andre har et aktivt socialt liv. Netværk, fritidsaktiviteter og støtte fra familie og venner spiller en vigtig rolle. CP Danmark har også netværksgrupper og arrangementer.",
  },
  {
    title: "Hvor kan man få mere rådgivning/vejledning?",
    content:
      "Du kan kontakte CP Danmarks rådgivning, som er gratis og åben for alle. De har viden om både hverdagsliv, rettigheder, støtteordninger og sociale tilbud.",
  },
];
---

<div class="mx-auto space-y-2" id="accordion-8">
  {
    items.map((item, index) => (
      <div
        class="accordion-item border border-gray-400 bg-gray-100 overflow-hidden focus:outline-none focus:ring-2 focus:ring-blue-400"
        data-index={index}
      >
        <button class="accordion-header w-full flex justify-between items-center px-4 py-5 text-left text-lg font-semibold text-gray-800">
          <h4 class="text-h4-mobile italic">{item.title}</h4>
          <svg class="accordion-icon w-5 h-5 text-gray-500 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="accordion-content px-4 text-gray-600 max-h-0 overflow-hidden transition-all duration-300">
          <p class="pb-4" set:html={item.content} />
        </div>
      </div>
    ))
  }
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const items = document.querySelectorAll("#accordion-8 .accordion-item");

    items.forEach((item, idx) => {
      const header = item.querySelector(".accordion-header");
      const content = item.querySelector(".accordion-content");
      const icon = item.querySelector(".accordion-icon");

      header.addEventListener("click", () => {
        items.forEach((otherItem, i) => {
          const otherContent = otherItem.querySelector(".accordion-content");
          const otherIcon = otherItem.querySelector(".accordion-icon");

          if (i === idx) {
            const isOpen = content.style.maxHeight;
            if (isOpen) {
              content.style.maxHeight = null;
              icon.style.transform = "rotate(0deg)";
            } else {
              content.style.maxHeight = content.scrollHeight + "px";
              icon.style.transform = "rotate(180deg)";
            }
          } else {
            otherContent.style.maxHeight = null;
            otherIcon.style.transform = "rotate(0deg)";
          }
        });
      });
    });
  });
</script>

<style>
  /* Dark mode */
  body.dark .accordion-header h4,
  body.dark .accordion-content p {
    color: #f6f6f6;
  }
  body.dark .accordion-icon {
    stroke: #f6f6f6;
  }

  body.dark .accordion-item {
    background-color: #4f4f4f;
    border-color: #7d7d7d;
  }

  body.dark .accordion-content a {
    color: #7dc1fc;
  }
</style>
