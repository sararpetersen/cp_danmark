---
const items = [
  {
    title: "Hvad gør vi?",
    content:
      "CP Danmark arbejder for at skabe bedre vilkår for mennesker med cerebral parese og deres pårørende. Vi tilbyder rådgivning, laver politisk arbejde, skaber fællesskaber og deler viden.",
    url: "https://www.cpdanmark.dk/om-os/det-goer-vi/",
  },
  {
    title: "Fællesskaberne",
    content:
      "Rundt i landet findes klubber og kredse, hvor mennesker med CP og deres familier mødes, deler erfaringer og deltager i sociale aktiviteter. Fællesskabet er en vigtig del af vores arbejde.",
    url: "https://www.cpdanmark.dk/om-os/foreningens-klubber/",
  },
  {
    title: "Hvordan er vi opbygget?",
    content:
      "CP Danmark er en medlemsorganisation med både frivillige og ansatte kræfter. Her kan du se hvordan vi er organiseret, hvem der står bag arbejdet, og hvordan du kan komme i kontakt med os.",
    url: "https://www.cpdanmark.dk/om-os/organisation/",
  },
];
---

<div class="mx-auto space-y-2" id="accordion-1">
  {
    items.map((item, index) => (
      <div
        class="accordion-item border border-gray-400 bg-gray-100 overflow-hidden focus:outline-none focus:ring-2 focus:ring-blue-400"
        data-index={index}
      >
        <button class="accordion-header w-full flex justify-between items-center px-4 py-5 text-left text-lg font-semibold text-gray-800">
          <h4>{item.title}</h4>
          <svg class="accordion-icon w-7 h-7 text-gray-400 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="accordion-content px-4 text-gray-600 max-h-0 overflow-hidden transition-all duration-300">
          <div class="pb-4">
            <p class="pb-2">{item.content} </p>

            <a
              href={item.url}
              aria-label="Læs mere om CP Danmark (eksternt link)"
              target="_blank"
              class=" underline text-blue-700 hover:text-blue-600 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-400"
            >
              Læs mere her
            </a>
          </div>
        </div>
      </div>
    ))
  }
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const items = document.querySelectorAll("#accordion-1 .accordion-item");

    items.forEach((item, idx) => {
      const header = item.querySelector(".accordion-header");
      const content = item.querySelector(".accordion-content");
      const icon = item.querySelector(".accordion-icon");

      header.addEventListener("click", () => {
        items.forEach((otherItem, i) => {
          const otherContent = otherItem.querySelector(".accordion-content");
          const otherIcon = otherItem.querySelector(".accordion-icon");

          if (i === idx) {
            const isOpen = content.style.maxHeight;
            if (isOpen) {
              content.style.maxHeight = null;
              icon.style.transform = "rotate(0deg)";
            } else {
              content.style.maxHeight = content.scrollHeight + "px";
              icon.style.transform = "rotate(180deg)";
            }
          } else {
            otherContent.style.maxHeight = null;
            otherIcon.style.transform = "rotate(0deg)";
          }
        });
      });
    });
  });
</script>

<style>
  /* Dark mode */
  body.dark .accordion-header h4,
  body.dark .accordion-content p {
    color: #f6f6f6;
  }
  body.dark .accordion-icon {
    stroke: #f6f6f6;
  }

  body.dark .accordion-item {
    background-color: #4f4f4f;
    border-color: #7d7d7d;
  }

  body.dark .accordion-content a {
    color: #7dc1fc;
  }
</style>
