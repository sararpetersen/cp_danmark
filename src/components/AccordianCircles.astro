---
import Button from "./Button.astro";
const regions = [
  {
    navn: "Hovedstadsområdet",
    kredse: [
      {
        navn: "Storkøbenhavn",
        kommuner: [
          "København, Frederiksberg, Albertslund, Ballerup, Brøndby, Dragør, Gentofte, Gladsaxe, Glostrup, Herlev, Hvidovre, Høje Taastrup, Ishøj, Rødovre, Lyngby-Taarbæk, Tårnby og Vallensbæk",
        ],
        url: "https://www.cpdanmark.dk/kredse/storkoebenhavn/",
      },
      {
        navn: "Nordsjælland",
        kommuner: [
          "Allerød",
          "Egedal",
          "Fredensborg",
          "Frederikssund",
          "Halsnæs",
          "Furesø",
          "Gribskov",
          "Helsingør",
          "Hillerød",
          "Hørsholm og Rudersdal",
        ],
        url: "https://www.cpdanmark.dk/kredse/nordsjaelland/",
      },
      {
        navn: "Roskilde",
        kommuner: ["Greve", "Køge", "Lejre", "Ringsted", "Roskilde og Solrød"],
        url: "https://www.cpdanmark.dk/kredse/roskilde/",
      },
    ],
  },
  {
    navn: "Sjælland og omegn",
    kredse: [
      {
        navn: "Nordvestsjælland",
        kommuner: ["Kalundborg", "Holbæk", "Odsherred", "Slagelse og Sorø"],
        url: "https://www.cpdanmark.dk/kredse/nordvestsjaelland/",
      },
      {
        navn: "Storstrøm",
        kommuner: ["Guldborgsund", "Lolland", "Vordingborg", "Faxe", "Næstved", "Stevns"],
        url: "https://www.cpdanmark.dk/kredse/storstrom/",
      },
      {
        navn: "Bornholm",
        kommuner: ["Bornholm", "Erteholmene"],
        url: "https://www.cpdanmark.dk/kredse/bornholm/",
      },
    ],
  },
  {
    navn: "Fyn & Sydjylland",
    kredse: [
      {
        navn: "Fyn",
        kommuner: ["Assens", "Faaborg-Midtfyn", "Kerteminde", "Langeland", "Middelfart", "Nordfyn", "Nyborg", "Odense", "Svendborg", "Ærø"],
        url: "https://www.cpdanmark.dk/kredse/fyn/",
      },
      {
        navn: "Sønderjylland",
        kommuner: ["Haderslev", "Sønderborg", "Tønder", "Aabenraa"],
        url: "https://www.cpdanmark.dk/kredse/sonderjylland/",
      },
      {
        navn: "Sydøstjylland",
        kommuner: ["Kolding", "Vejle"],
        url: "https://www.cpdanmark.dk/kredse/sydostjylland/",
      },
      {
        navn: "Sydvestjylland",
        kommuner: ["Billund", "Esbjerg", "Varde", "Vejen"],
        url: "https://www.cpdanmark.dk/kredse/sydvestjylland/",
      },
    ],
  },
  {
    navn: "Vest- & Østjylland",
    kredse: [
      {
        navn: "Vestjylland",
        kommuner: ["Herning", "Holstebro", "Ikast-Brande", "Lemvig", "Ringkøbing-Skjern", "Struer"],
        url: "https://www.cpdanmark.dk/kredse/vestjylland/",
      },
      {
        navn: "Midtjylland",
        kommuner: ["Skive og Viborg"],
        url: "https://www.cpdanmark.dk/kredse/midtjylland/",
      },
      {
        navn: "Østjylland",
        kommuner: ["Hedensted", "Horsens", "Odder", "Samsø", "Skanderborg", "Silkeborg", "Århus"],
        url: "https://www.cpdanmark.dk/kredse/ostjylland/",
      },
      {
        navn: "Nordøstjylland",
        kommuner: ["Favrskov", "Norddjurs", "Randers", "Syddjurs"],
        url: "https://www.cpdanmark.dk/kredse/nordostjylland/",
      },
      {
        navn: "Nordjylland",
        kommuner: [
          "Aalborg",
          "Brønderslev",
          "Frederikshavn",
          "Hjørring",
          "Jammerbugt",
          "Læsø",
          "Mariagerfjord",
          "Morsø",
          "Rebild",
          "Thisted",
          "Vesthimmerland",
        ],
        url: "https://www.cpdanmark.dk/kredse/nordjylland/",
      },
    ],
  },
];
---

<div class="mx-auto space-y-2" id="accordion-2">
  {
    regions.map((region, index) => (
      <div class="accordion-item border border-gray-400 bg-gray-100 overflow-hidden" data-index={index}>
        <button class="accordion-header w-full flex justify-between items-center px-4 py-5 text-left text-lg font-semibold text-gray-800">
          <h4>{region.navn}</h4>
          <svg class="accordion-icon w-7 h-7 text-gray-400 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <div class="accordion-content px-4 max-h-0 overflow-hidden transition-all duration-300">
          {region.kredse.map((kreds) => (
            <div class="pb-6">
              <h4 class="text-h4-mobile">{kreds.navn}</h4>
              <p class="pb-2">
                <strong class="font-semibold">Kommuner:</strong> {kreds.kommuner.join(", ")}
              </p>
              <a href={kreds.url} target="_blank" class="underline text-blue-700 hover:text-blue-600 transition duration-300 ease-in-out">
                Læs mere om kredsen her
              </a>
            </div>
          ))}
        </div>
      </div>
    ))
  }
</div>

<script>
  const items = document.querySelectorAll("#accordion-2 .accordion-item");

  items.forEach((item, idx) => {
    const header = item.querySelector(".accordion-header");
    const content = item.querySelector(".accordion-content");
    const icon = item.querySelector(".accordion-icon");

    header.addEventListener("click", () => {
      items.forEach((otherItem, i) => {
        const otherContent = otherItem.querySelector(".accordion-content");
        const otherIcon = otherItem.querySelector(".accordion-icon");

        if (i === idx) {
          const isOpen = content.style.maxHeight;
          if (isOpen) {
            content.style.maxHeight = null;
            icon.style.transform = "rotate(0deg)";
          } else {
            content.style.maxHeight = content.scrollHeight + "px";
            icon.style.transform = "rotate(180deg)";
          }
        } else {
          otherContent.style.maxHeight = null;
          otherIcon.style.transform = "rotate(0deg)";
        }
      });
    });
  });
</script>

<style>
  /* Dark mode */
  body.dark .accordion-header h4,
  body.dark .accordion-content h4,
  body.dark .accordion-content p {
    color: #f6f6f6;
  }
  body.dark .accordion-icon svg {
    color: #f6f6f6;
  }

  body.dark .accordion-item {
    background-color: #4f4f4f;
    border-color: #7d7d7d;
  }

  body.dark .accordion-content a {
    color: #7dc1fc;
  }
</style>
